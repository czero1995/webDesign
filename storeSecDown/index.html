<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<title>首页</title>
		<link rel="stylesheet" href="css/framework7.ios.min.css">
		<link rel="stylesheet" href="css/base.css">
		<link rel="stylesheet" href="css/footer.css">
		<link rel="stylesheet" href="css/index.css">
		
	</head>

	<body>
		<div class="views tabs" id="app">
			<div id="" class="view view-main tab active">
				<div class="pages">
					<div class="page">
						<div class="page-content">
							<div id="index" v-cloak>
								<div class="swiper-container circul">
									<div class="swiper-pagination"></div>
									<div class="swiper-wrapper">
										<div class="swiper-slide" v-for="banneritem in bannerList"><img :src="banneritem.img" alt="轮播图" /></div>
									</div>
								</div>
								<div class="top inlinkFlex-around">
									<div class="top-item">
										<a href="pages/myorder.html" class="external">
											<img src="img/icon/top_order.png" />
										</a>
										<p>订单</p>
									</div>
									<div class="top-item">
										<img src="img/icon/top_coupon.png" />
										<p>优惠券</p>
									</div>
									<div class="top-item">
										<a href="pages/activity.html" class="external">
											<img src="img/icon/top_order_seckill.png" />
											<p>秒杀专场</p>
										</a>
									</div>
								</div>
								<div v-for="(productItem,productIndex) in productList">
									<div>
										<a :href="'pages/categotry.html?catItem='+productItem.Category.TopNum" class="external">
											<div class="productTop inlinkFlex-spacebetween">
												<p class="productTop-text">{{productItem.Category.TopText}}</p>
												<div class="inlinkFlex">
													<p class="productTop-text">{{productIndex+1}}F</p>
													<img src="img/icon/arrowRight.png" />
												</div>
											</div>
										</a>
										<div class="productBox inlinkFlex-spacebetween">
											<div class="productItem inlinkFlex" v-for="goodsItem in productItem.SalesProduct">
												<div class="itemBox">
													<a href="pages/detail.html" class="external">
														<img :src="goodsItem.GoodsImage" class="itemImg" />
														<div class="itemText">
															<p class="text-ellipsis">{{goodsItem.GoodsName}}</p>
															<p class="itemIntro text-ellipsis">{{goodsItem.GoodsInfo}}</p>
															<p><span class="shopCoach">¥ {{goodsItem.GoodsPrice}}</span></p>
														</div>
													</a>

													<div class="addCartBox">
														<img src="img/icon/shop_addCart.png" @click="onAddCart(goodsItem)" v-show="!goodsItem.shopAddCart" />
														<img src="img/icon/shop_addCart_select.png" @click="onAddCart(goodsItem)" v-show="goodsItem.shopAddCart" />
													</div>

												</div>

											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="toolbar tabbar tabbar-labels mainFooter">
							<a href="pages/cart.html" class="tab-link external cartImg">
								<p class="cartNum">{{cartNum}}</p>
								<img src="img/icon/tab_cart.png" />
							</a>
							<div class="toolbar-inner">
								<a href="index.html" class="tab-link external footerItem footerHome">
									<i class="active icon footerIcon footerHomeIcon"></i>
									<span class="active tabbar-label">首页</span>
								</a>
								<a href="pages/categotry.html" class="tab-link footerItem footerCategory">
									<i class="icon footerIcon footerCategoryIcon"></i>
									<span class="tabbar-label">分类</span>
								</a>
								<a href="pages/activity.html" class="tab-link  footerItem footerActivity">
									<i class="icon footerIcon footerActivityIcon"></i>
									<span class="tabbar-label">活动</span>
								</a>
								<a href="pages/member.html" class="tab-link  footerItem footerMember">
									<i class="icon footerIcon footerMemberIcon"></i>
									<span class="tabbar-label">我的</span>
								</a>
							</div>
						</div>
					</div>
				</div>
			</div>

		</div>

		<script src="js/rem.js"></script>
		<script type="text/javascript" src="js/framework7.min.js"></script>
		<script type="text/javascript" src="js/my-app.js"></script>
		<script type="text/javascript" src="js/axios.js"></script>
		<script src="js/vue.js"></script>
		<script>
			new Vue({
				el: '#app',
				data() {
					return {
						bannerList: {},
						productList: {},
						cartNum: '0',
						itemCoach: '26.60',
						allCoach: '0.00',
						shopAddCart: false,
					}
				},
				mounted: function() {
					this.getBanner();
					this.getProduct();
					setTimeout("var mySwiper = myApp.swiper('.circul', {pagination:'.circul .swiper-pagination',speed: 400,spaceBetween: 100});", 500);
				},
				methods: {
					/*获取轮播图*/
					getBanner() {
						const that = this;
						axios.get('data/bannerData.json').then(function(response) {
								that.bannerList = response.data.Data;
								console.log(that.bannerList);
							})
							.catch(function(error) {
								console.log(error);
							});
					},
					/*获取商品列表*/
					getProduct() {
						const that = this;
						axios.get('data/homeData.json').then(function(response) {
								that.productList = response.data.Data;
								console.log(that.productList);
							})
							.catch(function(error) {
								console.log(error);
							});
					},
					/*添加到购物车*/
					onAddCart(good) {
						const that = this;
						if(typeof good.shopAddCart == 'undefined') {
							that.$set(good, "shopAddCart", true);
						} else {
							good.shopAddCart = !good.shopAddCart;
						}
						that.cartNum++;
						var time = setTimeout(function() {
							good.shopAddCart = !good.shopAddCart;
						}, 600);
					},
				}
			})
		</script>
	</body>

</html>