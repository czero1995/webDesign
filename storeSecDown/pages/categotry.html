<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<title>分类</title>
		<link rel="stylesheet" href="../css/framework7.ios.min.css">
		<link rel="stylesheet" href="../css/base.css">
		<link rel="stylesheet" href="../css/footer.css">
		<link rel="stylesheet" href="../css/category.css" />
	</head>

	<body>

		<div class="views tabs" id="app">
			<div id="home-lesson" class="view view-main tab active">
				<div class="pages">
					<div class="page">
						<div class="page-content">
							<div id="categoty" class="inlinkFlex" v-cloak>
								<div class="leftbar">
									<p class="barItem" v-for="categoryItem in categoryList" :class="{active:bar === categoryItem.Category.TopNum}" @click="onBar(categoryItem.Category.TopNum)">{{categoryItem.Category.TopText}}</p>
								</div>

								<div class="rightContent">

									<div v-show="bar === 'one'">
										<div class="categoryItem inlinkFlex" v-for="oneItem in oneList.OneProduct">
											<a href="detail.html" class="external">
												<div class="shopImg">
													<img :src="oneItem.GoodsImage" />
												</div>
												<div class="shopText">
													<p>{{oneItem.GoodsName}}</p>
													<p class="shopIntro">{{oneItem.GoodsInfo}}</p>
													<p class="shopCoach">¥ {{oneItem.GoodsPrice}}</p>
											</a>
											<div class="addCartBox">
												<img src="../img/icon/shop_addCart.png" @click="onAddCart(oneItem)" v-show="!oneItem.shopAddCart" />
												<img src="../img/icon/shop_addCart_select.png" @click="onAddCart(oneItem)" v-show="oneItem.shopAddCart" />
											</div>
											</div>
										</div>
									</div>
									<div v-show="bar === 'two'">
										<div class="categoryItem inlinkFlex" v-for="twoItem in twoList.TwoProduct">
											<a href="detail.html" class="external">
												<div class="shopImg">
													<img :src="twoItem.GoodsImage" />
												</div>
												<div class="shopText">
													<p>{{twoItem.GoodsName}}</p>
													<p class="shopIntro">{{twoItem.GoodsInfo}}</p>
													<p class="shopCoach">¥ {{twoItem.GoodsPrice}}</p>
											</a>
											<div class="addCartBox">
												<img src="../img/icon/shop_addCart.png" @click="onAddCart(twoItem)" v-show="!twoItem.shopAddCart" />
												<img src="../img/icon/shop_addCart_select.png" @click="onAddCart(twoItem)" v-show="twoItem.shopAddCart" />
											</div>
											</div>
										</div>
									</div>
									<div v-show="bar === 'three'">
										<div class="categoryItem inlinkFlex" v-for="threeItem in threeList.ThreeProduct">
											<a href="detail.html" class="external">
												<div class="shopImg">
													<img :src="threeItem.GoodsImage" />
												</div>
												<div class="shopText">
													<p>{{threeItem.GoodsName}}</p>
													<p class="shopIntro">{{threeItem.GoodsInfo}}</p>
													<p class="shopCoach">¥ {{threeItem.GoodsPrice}}</p>
											</a>
											<div class="addCartBox">
												<img src="../img/icon/shop_addCart.png" @click="onAddCart(threeItem)" v-show="!threeItem.shopAddCart" />
												<img src="../img/icon/shop_addCart_select.png" @click="onAddCart(threeItem)" v-show="threeItem.shopAddCart" />
											</div>
											</div>
										</div>
									</div>
									<div v-show="bar === 'four'">
										<div class="categoryItem inlinkFlex" v-for="fourItem in fourList.FourProduct">
											<a href="detail.html" class="external">
												<div class="shopImg">
													<img :src="fourItem.GoodsImage" />
												</div>
												<div class="shopText">
													<p>{{fourItem.GoodsName}}</p>
													<p class="shopIntro">{{fourItem.GoodsInfo}}</p>
													<p class="shopCoach">¥ {{fourItem.GoodsPrice}}</p>
											</a>
											<div class="addCartBox">
												<img src="../img/icon/shop_addCart.png" @click="onAddCart(fourItem)" v-show="!fourItem.shopAddCart" />
												<img src="../img/icon/shop_addCart_select.png" @click="onAddCart(fourItem)" v-show="fourItem.shopAddCart" />
											</div>
											</div>
										</div>
									</div>
									<div v-show="bar === 'five'">
										<div class="categoryItem inlinkFlex" v-for="fiveItem in fiveList.FiveProduct">
											<a href="detail.html" class="external">
												<div class="shopImg">
													<img :src="fiveItem.GoodsImage" />
												</div>
												<div class="shopText">
													<p>{{fiveItem.GoodsName}}</p>
													<p class="shopIntro">{{fiveItem.GoodsInfo}}</p>
													<p class="shopCoach">¥ {{fiveItem.GoodsPrice}}</p>
											</a>
											<div class="addCartBox">
												<img src="../img/icon/shop_addCart.png" @click="onAddCart(fiveItem)" v-show="!fiveItem.shopAddCart" />
												<img src="../img/icon/shop_addCart_select.png" @click="onAddCart(fiveItem)" v-show="fiveItem.shopAddCart" />
											</div>
											</div>
										</div>
									</div>
									<div v-show="bar === 'six'">
										<div class="categoryItem inlinkFlex" v-for="sixItem in sixList.SixProduct">
											<a href="detail.html" class="external">
												<div class="shopImg">
													<img :src="sixItem.GoodsImage" />
												</div>
												<div class="shopText">
													<p>{{sixItem.GoodsName}}</p>
													<p class="shopIntro">{{sixItem.GoodsInfo}}</p>
													<p class="shopCoach">¥ {{sixItem.GoodsPrice}}</p>
											</a>
											<div class="addCartBox">
												<img src="../img/icon/shop_addCart.png" @click="onAddCart(sixItem)" v-show="!sixItem.shopAddCart" />
												<img src="../img/icon/shop_addCart_select.png" @click="onAddCart(sixItem)" v-show="sixItem.shopAddCart" />
											</div>
											</div>
										</div>
									</div>
								</div>

							</div>
						</div>

						<div class="toolbar tabbar tabbar-labels mainFooter">
							<a href="cart.html" class="tab-link external cartImg">
								<p class="cartNum">{{cartNum}}</p>
								<img src="../img/icon/tab_cart.png" />

							</a>
							<div class="toolbar-inner">
								<a href="../index.html" class="tab-link external footerItem footerHome">
									<i class="icon footerIcon footerHomeIcon"></i>
									<span class=" tabbar-label">首页</span>
								</a>
								<a href="categotry.html" class="tab-link external footerItem footerCategory">
									<i class="active icon footerIcon footerCategoryIcon"></i>
									<span class="active tabbar-label">分类</span>
								</a>
								<a href="activity.html" class="tab-link external footerItem footerActivity">
									<i class="icon footerIcon footerActivityIcon"></i>
									<span class="tabbar-label">活动</span>
								</a>
								<a href="member.html" class="tab-link external footerItem footerMember">
									<i class="icon footerIcon footerMemberIcon"></i>
									<span class="tabbar-label">我的</span>
								</a>
							</div>
						</div>

					</div>
				</div>
			</div>

		</div>

		<script src="../js/rem.js"></script>
		<script type="text/javascript" src="../js/framework7.min.js"></script>
		<script type="text/javascript" src="../js/my-app.js"></script>
		<script type="text/javascript" src="../js/axios.js"></script>
		<script src="../js/vue.js"></script>
		<script>
			new Vue({
				el: '#app',
				data() {
					return {
						categoryList: {},
						oneList: {},
						twoList: {},
						threeList: {},
						fourList: {},
						fiveList: {},
						sixList: {},
						cartNum: '0',
						itemCoach: '40.00',
						bar: 'one',
						shopAddCart: false,
					}
				},
				mounted: function() {
					this.getUrlParam('catItem');
					this.getCategory();
				},
				methods: {
					/*获取商品列表*/
					getCategory() {
						const that = this;
						axios.get('../data/categoryData.json').then(function(response) {
								that.categoryList = response.data.Data;
								that.categoryList.forEach(function(item, index) {
									if(index == 0) {
										that.oneList = item;
									}
									if(index == 1) {
										that.twoList = item;
									}
									if(index == 2) {
										that.threeList = item;
									}
									if(index == 3) {
										that.fourList = item;
									}
									if(index == 4) {
										that.fiveList = item;
									}
									if(index == 5) {
										that.sixList = item;
									}

								})
							})
							.catch(function(error) {
								console.log(error);
							});
					},
					/*左侧导航栏*/
					onBar(item) {
						const that = this;
						this.bar = item;
					},
					/*添加购物车*/
					onAddCart(good) {
						const that = this;
						if(typeof good.shopAddCart == 'undefined') {
							that.$set(good, "shopAddCart", true);
						} else {
							good.shopAddCart = !good.shopAddCart;
						}
						that.cartNum++;
						var time = setTimeout(function() {
							good.shopAddCart = !good.shopAddCart;
						}, 600);
					},
					/*获取首页传值*/
					getUrlParam(name) {
						var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
						var r = window.location.search.substr(1).match(reg);
						if(r != null) {
							this.bar = r[2];
							return(r[2]);
						}
					}
				}
			})
		</script>
	</body>

</html>