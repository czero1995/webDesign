{extend name="common/base"}
{block name="content-header"}
<link rel="stylesheet" href="__STATIC__/admin/plugins/select2/select2.min.css">
    <h1>
        {$module_names[0]}
        <small>
        {$module_names[1]}</small>
    </h1>
    <ol class="breadcrumb">
        {volist name="module_names" id="vo"}
            <li {if condition="$module_nums==$key"}class="active"{/if}>{if condition="0==$key"}<i class="fa fa-dashboard"></i>{/if} {$vo}</li>
        {/volist}
    </ol>
{/block}

{block name="content"}
        <div class="container-fluid">
            <div class="pull-right">
                <a href="javascript:history.go(-1)" data-toggle="tooltip" title="" class="btn btn-default" data-original-title="返回管理员列表"><i class="fa fa-reply"></i></a>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title"><i class="fa fa-list"></i> 编辑用户</h3>
                </div>
                <div class="panel-body " id="editUser">
                
                    <div class="tab-content col-md-12">
                        <div class="tab-pane active" id="couserEdit">
                            <form method="post" id="js_upForm" action="{:url('admin/account/edit')}">
                            <input type="hidden" name="id" value="{$data.id}">
                            <table class="table table-bordered">
                                <tbody>
                             
                                <tr>
                                    <td class="col-sm-2">用户名：</td>
                                    <td class="col-sm-10">
                                        <input type="text" class="form-control required" name="account" id="account" value="{$data.account}" ></input>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-sm-2">真实名: </td>
                                    <td class="col-sm-10">
                                         <input type="text" class="form-control required" id="realname" name="realname" value="{$data.realname}" placeholder="">
                                    </td>
                                </tr>
                                 <tr>
                                    <td class="col-sm-2">密码: </td>
                                    <td class="col-sm-10">
                                        <input type="password" class="form-control required" id="password" name="password" value="{$data.password}" placeholder="">
                                    </td>
                                </tr>
                                <tr>
                                    <td>状态</td>
                                    <td>
                                        <input {if condition="1==$data.status"}checked="checked" {/if} type="radio" name="status"  value="1"> 启用
                                        <input type="radio"  {if condition="2==$data.status"}checked="checked" {/if}  name="status" value="2"> 禁用
                                    </td>
                                </tr>
                                </tbody>
                                <tfoot>
                                <tr>
                                    <td></td>
                                    <td class="text-left"><input class="btn btn-primary js_submit" type="button" value="保存"></td>
                                </tr>
                                </tfoot>
                                </table>
                            </form>
                        </div>
                    </div>
                   
                </div>
            </div>
        </div>

    </section>
</div>
{/block}
{block name="script"}
<script src="/admin/js/vue.js"></script>
<script src="__STATIC__/admin/dist/js/axios.min.js"></script>
<script src="__STATIC__/admin/dist/js/es6-promise.auto.min.js"></script>

<script>
$('.js_submit').on('click',function(){
  $("#js_upForm").submit();
});

$("#js_upForm").validate({
    submitHandler : function(){
        var url = $("#js_upForm").attr("action");
        $.ajax({
            url : url,
            type : "post",
            dataType : "json",
            data : $("#js_upForm").serialize(),
            success : function(res){
                console.log(res);
                if( res.status == true ){
                    location.href = res.url;
                }else {
                    layer.alert(res.msg, {icon: 2});
                }
            }
        });
    }
});
</script>
{/block}